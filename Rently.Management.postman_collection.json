{
  "info": {
    "name": "Rently.Management API",
    "_postman_id": "1b3a9b6d-2d45-4b9a-9c4f-1f5c8f23c001",
    "description": "Postman Collection for Rently.Management WebApi (JWT protected). Update variables before use.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/api/auth/login", "host": ["{{baseUrl}}"], "path": ["api","auth","login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"<your-admin-email>\",\n  \"password\": \"<your-password>\"\n}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "let json = {};",
                  "try { json = pm.response.json(); } catch(e) {}",
                  "if (json && json.Token) {",
                  "  pm.collectionVariables.set('token', json.Token);",
                  "  pm.test('Token captured', function () {",
                  "    pm.expect(pm.collectionVariables.get('token')).to.exist;",
                  "  });",
                  "} else {",
                  "  pm.test('Login response contains token', function () {",
                  "    pm.expect(false, 'Token not found in response').to.be.true;",
                  "  });",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Account",
      "item": [
        {
          "name": "Change Name",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/account/change-name", "host": ["{{baseUrl}}"], "path": ["api","account","change-name"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Admin Name\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/account/change-password", "host": ["{{baseUrl}}"], "path": ["api","account","change-password"] },
            "body": { "mode": "raw", "raw": "{\n  \"currentPassword\": \"<current>\",\n  \"newPassword\": \"<new>\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Request Reset",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/account/request-reset", "host": ["{{baseUrl}}"], "path": ["api","account","request-reset"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"user@example.com\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/account/reset-password", "host": ["{{baseUrl}}"], "path": ["api","account","reset-password"] },
            "body": { "mode": "raw", "raw": "{\n  \"email\": \"user@example.com\",\n  \"token\": \"<reset-token>\",\n  \"newPassword\": \"<new>\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Add Admin",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/account/add-admin", "host": ["{{baseUrl}}"], "path": ["api","account","add-admin"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"New Admin\",\n  \"email\": \"admin2@example.com\",\n  \"phone\": \"01000000000\",\n  \"password\": \"<strong-password>\"\n}", "options": { "raw": { "language": "json" } } }
          }
        }
      ]
    },
    {
      "name": "Dashboard",
      "item": [
        {
          "name": "Stats",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/dashboard/stats", "host": ["{{baseUrl}}"], "path": ["api","dashboard","stats"] } }
        },
        {
          "name": "Weekly Revenue",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/dashboard/weekly-revenue?days=7", "host": ["{{baseUrl}}"], "path": ["api","dashboard","weekly-revenue"], "query":[{"key":"days","value":"7"}] } }
        },
        {
          "name": "Bookings By Month",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/dashboard/bookings-by-month?months=6", "host": ["{{baseUrl}}"], "path": ["api","dashboard","bookings-by-month"], "query":[{"key":"months","value":"6"}] } }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "List Users",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user?search=&status=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","user"], "query":[{"key":"search","value":""},{"key":"status","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Get User",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user/1", "host": ["{{baseUrl}}"], "path": ["api","user","1"] } }
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/user", "host": ["{{baseUrl}}"], "path": ["api","user"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"User Name\",\n  \"email\": \"user@example.com\",\n  \"phone\": \"01000000000\",\n  \"role\": \"User\",\n  \"approvalStatus\": \"Pending\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/user/1", "host": ["{{baseUrl}}"], "path": ["api","user","1"] },
            "body": { "mode": "raw", "raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"01000000001\",\n  \"approvalStatus\": \"Approved\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Delete User",
          "request": { "method": "DELETE", "url": { "raw": "{{baseUrl}}/api/user/1", "host": ["{{baseUrl}}"], "path": ["api","user","1"] } }
        },
        {
          "name": "Update User Status",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/user/1/status", "host": ["{{baseUrl}}"], "path": ["api","user","1","status"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"Active\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Activation Requests",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/user/activation-requests?page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","user","activation-requests"], "query":[{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        }
      ]
    },
    {
      "name": "Request",
      "item": [
        {
          "name": "List Requests",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/request?search=&type=&status=&sort=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","request"], "query":[{"key":"search","value":""},{"key":"type","value":""},{"key":"status","value":""},{"key":"sort","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Request Details (Owner verification)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/request/1?type=Owner%20verification", "host": ["{{baseUrl}}"], "path": ["api","request","1"], "query":[{"key":"type","value":"Owner verification"}] } }
        },
        {
          "name": "Request Details (Car listing)",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/request/1?type=Car%20listing", "host": ["{{baseUrl}}"], "path": ["api","request","1"], "query":[{"key":"type","value":"Car listing"}] } }
        },
        {
          "name": "Update Request Status",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/request/1/status", "host": ["{{baseUrl}}"], "path": ["api","request","1","status"] },
            "body": { "mode": "raw", "raw": "{\n  \"type\": \"Owner verification\",\n  \"status\": \"Approved\"\n}", "options": { "raw": { "language": "json" } } }
          }
        }
      ]
    },
    {
      "name": "Car",
      "item": [
        {
          "name": "Statistics",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/car/statistics", "host": ["{{baseUrl}}"], "path": ["api","car","statistics"] } }
        },
        {
          "name": "List Cars",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/car?search=&status=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","car"], "query":[{"key":"search","value":""},{"key":"status","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Get Car",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/car/1", "host": ["{{baseUrl}}"], "path": ["api","car","1"] } }
        },
        {
          "name": "Create Car",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/car", "host": ["{{baseUrl}}"], "path": ["api","car"] },
            "body": { "mode": "raw", "raw": "{\n  \"ownerId\": 1,\n  \"brand\": \"Toyota\",\n  \"model\": \"Corolla\",\n  \"year\": 2021,\n  \"pricePerDay\": 500,\n  \"status\": \"Pending\",\n  \"transmission\": \"Automatic\",\n  \"color\": \"White\",\n  \"locationCity\": \"Cairo\",\n  \"features\": \"AC, Radio\",\n  \"description\": \"Clean car\",\n  \"licensePlate\": \"ABC123\",\n  \"carLicenseImage\": \"https://example.com/img.jpg\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Update Car",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/car/1", "host": ["{{baseUrl}}"], "path": ["api","car","1"] },
            "body": { "mode": "raw", "raw": "{\n  \"brand\": \"Toyota\",\n  \"model\": \"Yaris\",\n  \"year\": 2022,\n  \"pricePerDay\": 650,\n  \"status\": \"Available\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Delete Car",
          "request": { "method": "DELETE", "url": { "raw": "{{baseUrl}}/api/car/1", "host": ["{{baseUrl}}"], "path": ["api","car","1"] } }
        },
        {
          "name": "Update Car Status",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/car/1/status", "host": ["{{baseUrl}}"], "path": ["api","car","1","status"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"Available\"\n}", "options": { "raw": { "language": "json" } } }
          }
        }
      ]
    },
    {
      "name": "Booking",
      "item": [
        {
          "name": "Statistics",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/booking/statistics", "host": ["{{baseUrl}}"], "path": ["api","booking","statistics"] } }
        },
        {
          "name": "List Bookings",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/booking?search=&status=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","booking"], "query":[{"key":"search","value":""},{"key":"status","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Get Booking",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/booking/1", "host": ["{{baseUrl}}"], "path": ["api","booking","1"] } }
        },
        {
          "name": "Update Booking Status",
          "request": {
            "method": "PATCH",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/booking/1/status", "host": ["{{baseUrl}}"], "path": ["api","booking","1","status"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"Active\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Refund All Bookings",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/booking/refund-all", "host": ["{{baseUrl}}"], "path": ["api","booking","refund-all"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingIds\": [1,2,3],\n  \"reason\": \"Double charge\"\n}", "options": { "raw": { "language": "json" } } }
          }
        }
      ]
    },
    {
      "name": "Payment",
      "item": [
        {
          "name": "Statistics",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/payment/statistics", "host": ["{{baseUrl}}"], "path": ["api","payment","statistics"] } }
        },
        {
          "name": "Paymob Init",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/paymob/init", "host": ["{{baseUrl}}"], "path": ["api","payment","paymob","init"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingId\": 1,\n  \"userId\": 1,\n  \"amount\": 100.00,\n  \"currency\": \"EGP\",\n  \"email\": \"user@example.com\",\n  \"name\": \"User Name\",\n  \"phone\": \"01000000000\",\n  \"method\": \"card\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Paymob Checkout (iframe/wallet)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/payment/paymob/checkout?bookingId=1&userId=1&amount=100&currency=EGP&email=user@example.com&name=User%20Name&phone=01000000000&method=card",
              "host": ["{{baseUrl}}"],
              "path": ["api","payment","paymob","checkout"],
              "query": [
                { "key": "bookingId", "value": "1" },
                { "key": "userId", "value": "1" },
                { "key": "amount", "value": "100" },
                { "key": "currency", "value": "EGP" },
                { "key": "email", "value": "user@example.com" },
                { "key": "name", "value": "User Name" },
                { "key": "phone", "value": "01000000000" },
                { "key": "method", "value": "card" }
              ]
            }
          }
        },
        {
          "name": "Paymob Checkout (wallet redirect)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/payment/paymob/checkout?bookingId=1&userId=1&amount=100&currency=EGP&email=user@example.com&name=User%20Name&phone=01000000000&method=wallet",
              "host": ["{{baseUrl}}"],
              "path": ["api","payment","paymob","checkout"],
              "query": [
                { "key": "bookingId", "value": "1" },
                { "key": "userId", "value": "1" },
                { "key": "amount", "value": "100" },
                { "key": "currency", "value": "EGP" },
                { "key": "email", "value": "user@example.com" },
                { "key": "name", "value": "User Name" },
                { "key": "phone", "value": "01000000000" },
                { "key": "method", "value": "wallet" }
              ]
            }
          }
        },
        {
          "name": "Test Iframe",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/payment/test/iframe?url=https://example.com", "host": ["{{baseUrl}}"], "path": ["api","payment","test","iframe"], "query":[{"key":"url","value":"https://example.com"}] }
          }
        },
        {
          "name": "Paymob Callback",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/payment/paymob/callback?hmac=<hmac>&order=<order-id>&success=true", "host": ["{{baseUrl}}"], "path": ["api","payment","paymob","callback"], "query":[{"key":"hmac","value":"<hmac>"},{"key":"order","value":"<order-id>"},{"key":"success","value":"true"}] }
          }
        },
        {
          "name": "Paymob Webhook",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/paymob/webhook?hmac=<hmac>", "host": ["{{baseUrl}}"], "path": ["api","payment","paymob","webhook"], "query":[{"key":"hmac","value":"<hmac>"}] },
            "body": { "mode": "raw", "raw": "{\n  \"obj\": {\n    \"id\": 123,\n    \"amount_cents\": 10000,\n    \"currency\": \"EGP\",\n    \"order\": { \"id\": 456 },\n    \"success\": true\n  }\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Transactions",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/payment/transactions?search=&type=&status=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","payment","transactions"], "query":[{"key":"search","value":""},{"key":"type","value":""},{"key":"status","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Owner Payouts",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/payment/owner-payouts?page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","payment","owner-payouts"], "query":[{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Refunds",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/payment/refunds?status=&page=1&pageSize=10", "host": ["{{baseUrl}}"], "path": ["api","payment","refunds"], "query":[{"key":"status","value":""},{"key":"page","value":"1"},{"key":"pageSize","value":"10"}] } }
        },
        {
          "name": "Get Payment",
          "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/payment/1", "host": ["{{baseUrl}}"], "path": ["api","payment","1"] } }
        },
        {
          "name": "Create Payment",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment", "host": ["{{baseUrl}}"], "path": ["api","payment"] },
            "body": { "mode": "raw", "raw": "{\n  \"bookingId\": 1,\n  \"userId\": 1,\n  \"amount\": 100.00,\n  \"currency\": \"EGP\",\n  \"status\": \"Pending\",\n  \"provider\": \"Paymob\",\n  \"providerPaymentId\": \"\",\n  \"providerReceiptUrl\": \"\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Update Payment",
          "request": {
            "method": "PUT",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/1", "host": ["{{baseUrl}}"], "path": ["api","payment","1"] },
            "body": { "mode": "raw", "raw": "{\n  \"status\": \"Succeeded\",\n  \"providerPaymentId\": \"12345\",\n  \"providerReceiptUrl\": \"https://example.com/receipt/12345\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Process Payout",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/process-payout", "host": ["{{baseUrl}}"], "path": ["api","payment","process-payout"] },
            "body": { "mode": "raw", "raw": "{\n  \"ownerId\": 1,\n  \"amount\": 1000.00,\n  \"currency\": \"EGP\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Process Refund",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/process-refund", "host": ["{{baseUrl}}"], "path": ["api","payment","process-refund"] },
            "body": { "mode": "raw", "raw": "{\n  \"paymentId\": 1,\n  \"amount\": 50.00,\n  \"reason\": \"Customer request\"\n}", "options": { "raw": { "language": "json" } } }
          }
        },
        {
          "name": "Refund All (Payments)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/payment/refund-all", "host": ["{{baseUrl}}"], "path": ["api","payment","refund-all"] },
            "body": { "mode": "raw", "raw": "[\n  1,\n  2,\n  3\n]", "options": { "raw": { "language": "json" } } }
          }
        }
      ]
    }
  ]
}
